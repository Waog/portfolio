<mat-card class="project-card">
  <mat-card-header>
    <div class="header-content">
      <mat-card-title>{{ project().title }}</mat-card-title>
      <mat-chip color="accent" highlighted class="project-type-chip">
        {{ project().projectType }}
      </mat-chip>
    </div>
  </mat-card-header>
  <mat-card-content>
    <!-- Compact Content (Collapsed State) -->
    <div *ngIf="!showExpandedContent" class="compact-content">
      <div class="compact-description">
        <p>
          {{ project().compactDescription }}
          <span class="key-achievements"> {{ project().keyAchievements }}</span>
        </p>
      </div>

      <div class="content-toggle">
        <button
          mat-button
          color="primary"
          (click)="toggleContent()"
          class="expand-button"
        >
          <mat-icon>expand_more</mat-icon>
          Show Details
        </button>
      </div>
    </div>

    <!-- Expanded Content (Full State) -->
    <div *ngIf="showExpandedContent" class="expanded-content">
      <div class="description-section">
        <p>
          {{ project().fullDescription }}
        </p>
      </div>

      <div class="features-section">
        <h4>
          <mat-icon>check_circle</mat-icon>
          Key Features
        </h4>
        <mat-list dense>
          <mat-list-item *ngFor="let feature of project().features">
            <mat-icon matListItemIcon color="primary">check</mat-icon>
            <div matListItemTitle>{{ feature }}</div>
          </mat-list-item>
        </mat-list>
      </div>

      <div class="highlights-section">
        <h4>
          <mat-icon>star</mat-icon>
          Highlights
        </h4>
        <mat-list dense>
          <mat-list-item *ngFor="let highlight of project().highlights">
            <mat-icon matListItemIcon color="accent">star</mat-icon>
            <div matListItemTitle>
              {{ highlight }}
            </div>
          </mat-list-item>
        </mat-list>
      </div>

      <div class="content-toggle">
        <button
          mat-button
          color="primary"
          (click)="toggleContent()"
          class="collapse-button"
        >
          <mat-icon>expand_less</mat-icon>
          Show Less
        </button>
      </div>
    </div>

    <mat-divider></mat-divider>

    <div class="meta-tiles">
      <div class="meta-tile">
        <mat-icon>person</mat-icon>
        <div class="tile-content">
          <div class="primary-text">{{ project().metadata.role.primary }}</div>
          <div class="secondary-text">
            {{ project().metadata.role.secondary }}
          </div>
        </div>
      </div>

      <div class="meta-tile">
        <mat-icon>schedule</mat-icon>
        <div class="tile-content">
          <div class="primary-text">
            {{ project().metadata.duration.primary }}
          </div>
          <div class="secondary-text">
            {{ project().metadata.duration.secondary }}
          </div>
        </div>
      </div>
      <div class="meta-tile">
        <mat-icon>location_on</mat-icon>
        <div class="tile-content">
          <div class="primary-text">
            {{ project().metadata.location.primary }}
          </div>
          <div class="secondary-text">
            {{ project().metadata.location.secondary }}
          </div>
        </div>
      </div>

      <div class="meta-tile">
        <mat-icon>business</mat-icon>
        <div class="tile-content">
          <div class="primary-text">
            {{ project().metadata.company.primary }}
          </div>
          <div class="secondary-text">
            {{ project().metadata.company.secondary }}
          </div>
        </div>
      </div>
    </div>

    <mat-divider></mat-divider>
    <div class="technologies-section">
      <div class="technologies-wrapper">
        <mat-chip-set>
          <mat-chip
            *ngFor="let tech of visibleTechnologies"
            [class]="'match-' + tech.matchType"
          >
            <mat-icon *ngIf="tech.matchType === 'full'" matChipAvatar
              >star</mat-icon
            >
            <mat-icon *ngIf="tech.matchType === 'indirect'" matChipAvatar
              >star_border</mat-icon
            >
            {{ tech.name }}
          </mat-chip>

          <button
            *ngIf="hiddenTechnologiesCount > 0 && !showAllTechnologies"
            mat-button
            (click)="toggleTechnologies()"
            class="inline-toggle-button"
          >
            show {{ hiddenTechnologiesCount }} more...
          </button>
        </mat-chip-set>
        <div class="technologies-toggle" *ngIf="showAllTechnologies">
          <button
            mat-button
            color="primary"
            (click)="toggleTechnologies()"
            class="toggle-button"
          >
            <mat-icon>expand_less</mat-icon>
            Show Less
          </button>
        </div>
      </div>
    </div>
  </mat-card-content>
</mat-card>
