<section id="projects" class="projects-container">
  <!-- Top 3 projects section -->
  <section class="top-projects-section page-break-after">
    <lib-section-header text="Top Matching Projects" />
    <lib-project-item
      *ngFor="
        let project of allProjectsInOrder.slice(0, 3);
        let i = index;
        trackBy: trackByProjectId
      "
      [project]="project"
      [isTopProject]="true"
      [customIndex]="i + 1"
      (moveUp)="moveProjectUp($event)"
      (moveDown)="moveProjectDown($event)"
    >
    </lib-project-item>
  </section>

  <!-- Other projects toggle button -->
  <section class="all-projects-toggle">
    <button
      mat-button
      color="primary"
      (click)="toggleAllProjects()"
      class="toggle-button screen-only"
    >
      <mat-icon>{{ showAllProjects ? 'expand_less' : 'expand_more' }}</mat-icon>
      {{ showAllProjects ? 'Hide All Projects' : 'Show All Projects' }}
    </button>
  </section>

  <!-- Other projects section -->
  @if (showAllProjects || isPrintModeActive) {
  <main class="all-projects-list">
    <lib-section-header text="Other Projects" />
    <lib-project-item
      *ngFor="
        let project of allProjectsInOrder.slice(
          3,
          isPrintModeActive ? 8 : undefined
        );
        let i = index;
        trackBy: trackByProjectId
      "
      [project]="project"
      [isTopProject]="false"
      [compact]="true"
      [customIndex]="i + 4"
      (moveUp)="moveProjectUp($event)"
      (moveDown)="moveProjectDown($event)"
    >
    </lib-project-item>
  </main>
  }
</section>
